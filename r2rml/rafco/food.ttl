@base <http://rafco.jgsogo.es/linkeddata/def/rafco.ttl#>.

@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix foaf: <http://xmlns.com/foaf/0.1/>.

# Namespace of RAFCO resources
@prefix rafco: <http://rafco.jgsogo.es/linkeddata/recurso/>.

#########
# Food
#########
:food
    rr:logicalTable [ rr:tableName "Food" ];
    
    rr:subjectMap [
      rr:template rafco:food/{NDB_no} ;
      rr:class :Food ;
    ] ;
    
    rr:predicateObjectMap [
      rr:predicate :longDesc;
      rr:objectMap [ rr:column "Long_Desc" ] ;
    ] ;

    rr:predicateObjectMap [
      rr:predicate :shrtDesc;
      rr:objectMap [ rr:column "Shrt_Desc" ] ;
    ] ;
                      
    rr:predicateObjectMap [
      rr:predicate :sciName;
      rr:objectMap [ rr:column "SciName" ] ;
    ].
    
#########
# Food nutrients - Many to many
#########
:food-nutrient-with-amount
    rr:logicalTable [ rr:tableName "food_foodnutrients" ];
    
    rr:subjectMap [
        rr:template rafco:food/{NDB_No} ;
    ] ;
    
    rr:predicateObjectMap [
      rr:predicate :nutrientWithAmount ;
      rr:objectMap [ 
        rr:template rafco:nutrientwithamount/{id} ;
      ] ;
    ] .

:nutrient-with-amount
    rr:logicalTable [ rr:tableName "food_foodnutrients" ];
    
    rr:subjectMap [
        rr:template rafco:nutrientwithamount/{id} ;
        rr:class :NutrientWithAmount ;
    ] ;
    
    rr:predicateObjectMap [
      rr:predicate :nutrient ;
      rr:objectMap [ 
        rr:template rafco:nutrient/{Nutr_No} ;
      ] ;
    ] ;    
    
    rr:predicateObjectMap [
      rr:predicate :amount ;
      rr:objectMap [ rr:column "Nutr_Val" ] ;
    ] .

#########
# Langual - Many to many
#########
:langual
    rr:logicalTable [ rr:tableName "food_langual" ];

    rr:subjectMap [
        rr:template rafco:food/{NDB_No} ;
    ] ;
    
    rr:predicateObjectMap [
      rr:predicate :langual ;
      rr:objectMap [ 
        rr:template rafco:langual/{Factor_Code} ;
      ] ;
    ] .


#########
# Langual description
#########
:langual-desc
    rr:logicalTable [ rr:tableName "food_langualdesc" ];

    rr:subjectMap [
      rr:template rafco:langual/{Factor_Code} ;
      rr:class :Langual ; 
    ] ;
    
    rr:predicateObjectMap [
      rr:predicate :description;
      rr:objectMap [ rr:column "Description" ] ;
    ] .
    
#########
# Weight - N ary relation
#########
:food-weight
    rr:logicalTable [ rr:tableName "food_weight" ];
    
    rr:subjectMap [
      rr:template rafco:food/{NDB_No} ;
    ] ;
    
    rr:predicateObjectMap [
      rr:predicate :weightPerAmount;
      rr:objectMap [ rr:template rafco:weightperamount/{id} ] ;
    ] .

:weight-per-amount
    rr:logicalTable [ rr:tableName "food_weight" ];
    
    rr:subjectMap [
        rr:template rafco:weightperamount/{id} ;
        rr:class :WeightPerAmount ;
    ] ;
    
    rr:predicateObjectMap [
      rr:predicate :foodAmount ;
      rr:objectMap [ rr:column "Amount" ] ;
    ] ;    

    rr:predicateObjectMap [
      rr:predicate :gramWeight ;
      rr:objectMap [ rr:column "Gm_Wgt" ] ;
    ] ;    
    
    rr:predicateObjectMap [
      rr:predicate :msreDesc ;
      rr:objectMap [ rr:column "Msre_Desc" ] ;
    ] .

